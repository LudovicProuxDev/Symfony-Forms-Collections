{% extends 'base.html.twig' %}

{% block title %}Hello IndexController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>{{ company.label }}</h1>
    <a href="{{ path('app_companies') }}">Back</a>
    {{ include('index/_formcompany.html.twig') }}
</div>

<script>
    document.querySelectorAll('.add_item_link').forEach(btn => {
        btn.addEventListener("click", addFormToCollection)
    });

    function addFormToCollection(e) {
        const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

        const item = document.createElement('tr');
        item.innerHTML = collectionHolder
            .dataset
            .prototype
            .replace(
            /__name__/g,
            collectionHolder.dataset.index
            );

        collectionHolder.appendChild(item);

        collectionHolder.dataset.index++;

        // add a delete link to the new form
        addTeamFormDeleteLink(item);
    };

    function addTeamFormDeleteLink(item) {
        const tdButton = document.createElement('td');
        const removeFormButton = document.createElement('button');
        removeFormButton.innerText = 'Delete this team';

        tdButton.append(removeFormButton);
        item.append(tdButton);

        removeFormButton.addEventListener('click', (e) => {
            e.preventDefault();
            // remove the tr for the team form
            item.remove();
        });
    }
</script>
{% endblock %}
